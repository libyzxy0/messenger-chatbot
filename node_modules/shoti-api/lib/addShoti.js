const addShoti = (obj) => {
	return new Promise((resolve, reject) => {
		const axios = require('axios');
        const auth = require('./auth.js');
		let isAuthenticated = auth.isAuthenticated(obj.api_key);
		if(isAuthenticated) {
			let ax = axios.post(`https://shoti.libyzxy0-dev.repl.co/api/add-video`, {
				url: obj.url,
				api_key: obj.api_key,
				type: obj.type,
            });
			ax.then((response) => {
				resolve(response.data);
			})
			ax.catch((err) => {
				let error = new Error(err)
			    reject(error)
			})
		} else {
			let error = new Error({ code: 400, message: "Invalid apikey!" })
			reject(error)
		}
	})
}
module.exports = addShoti;